{"mappings":"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","sources":["<anon>","src/main.js","src/util/pkce.js","src/util/render.js","src/util/jwt.js","node_modules/json-formatter-js/dist/json-formatter.umd.js","src/util/config.js","src/keycloak/brokeredToken.js","src/util/idTokenStore.js","src/logout/logout.js","src/refresh/refresh.js","src/userinfo/userinfo.js","src/util/discovery.js","src/vulnerabilities/openRedirect.js"],"sourcesContent":["\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n// Based on code from https://github.com/curityio/pkce-javascript-example which is publichsed under Apache 2.0 License\nconst $fc457dc040315093$var$method = crypto.subtle ? \"S256\" : \"plain\";\n$fc457dc040315093$var$_warnIfNoCrypto();\nfunction $fc457dc040315093$var$challengeMethod() {\n    return $fc457dc040315093$var$method;\n}\nasync function $fc457dc040315093$var$generateCodeChallenge(codeVerifier) {\n    if ($fc457dc040315093$var$method === \"S256\") {\n        var digest = await crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(codeVerifier));\n        return btoa(String.fromCharCode(...new Uint8Array(digest))).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n    }\n    if ($fc457dc040315093$var$method === \"plain\") return codeVerifier;\n}\nfunction $fc457dc040315093$var$generateRandomString(length) {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    for(var i = 0; i < length; i++)text += possible.charAt(Math.floor(Math.random() * possible.length));\n    return text;\n}\nfunction $fc457dc040315093$var$_warnIfNoCrypto() {\n    if (!crypto.subtle) console.warn('<p><b>WARNING:</b> The script will fall back to using plain code challenge as crypto is not available.</p><p>Javascript crypto services require that this site is served in a <a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\">secure context</a>; either from <b>(*.)localhost</b> or via <b>https</b>. </p><p> You can add an entry to /etc/hosts like \"127.0.0.1 public-test-client.localhost\" and reload the site from there, enable SSL using something like <a href=\"https://letsencrypt.org/\">letsencypt</a>, or refer to this <a href=\"https://stackoverflow.com/questions/46468104/how-to-use-subtlecrypto-in-chrome-window-crypto-subtle-is-undefined\">stackoverflow article</a> for more alternatives.</p><p>If Javascript crypto is available this message will disappear.</p>');\n}\nvar $fc457dc040315093$export$2e2bcd8739ae039 = {\n    challengeMethod: $fc457dc040315093$var$challengeMethod,\n    generateCodeChallenge: $fc457dc040315093$var$generateCodeChallenge,\n    generateRandomString: $fc457dc040315093$var$generateRandomString\n};\n\n\nfunction $1d7a13d85044de1b$var$decode(jwt) {\n    if (!jwt) return \"Error: No token available\";\n    let parts = jwt.split(\".\");\n    if (parts.length !== 3) return \"Error: Not a JWT, expected three parts separated by a dot.\";\n    let header = JSON.parse($1d7a13d85044de1b$var$base64UrlDecode(parts[0]));\n    let claims = JSON.parse($1d7a13d85044de1b$var$base64UrlDecode(parts[1]));\n    return {\n        header: header,\n        claims: claims\n    };\n}\nfunction $1d7a13d85044de1b$var$base64UrlDecode(input) {\n    // Based on https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\n    // Replace replace \"-\" with \"+\" and \"_\" with \"/\"\n    let base64 = input.replace(/-/g, '+').replace(/_/g, '/');\n    return decodeURIComponent(atob(base64).split('').map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n}\nvar $1d7a13d85044de1b$export$2e2bcd8739ae039 = {\n    decode: $1d7a13d85044de1b$var$decode\n};\n\n\nvar $d6b3afe7d584901c$exports = {};\n!function(t, e) {\n    $d6b3afe7d584901c$exports = e();\n}($d6b3afe7d584901c$exports, function() {\n    \"use strict\";\n    function t(t) {\n        return null === t ? \"null\" : typeof t;\n    }\n    function e(t) {\n        return !!t && \"object\" == typeof t;\n    }\n    function r(t) {\n        if (void 0 === t) return \"\";\n        if (null === t) return \"Object\";\n        if (\"object\" == typeof t && !t.constructor) return \"Object\";\n        var e = /function ([^(]*)/.exec(t.constructor.toString());\n        return e && e.length > 1 ? e[1] : \"\";\n    }\n    function n(t, e, r) {\n        return \"null\" === t || \"undefined\" === t ? t : (\"string\" !== t && \"stringifiable\" !== t || (r = '\"' + r.replace(/\"/g, '\\\\\"') + '\"'), \"function\" === t ? e.toString().replace(/[\\r\\n]/g, \"\").replace(/\\{.*\\}/, \"\") + \"{\\u2026}\" : r);\n    }\n    function o(o) {\n        var i = \"\";\n        return e(o) ? (i = r(o), Array.isArray(o) && (i += \"[\" + o.length + \"]\")) : i = n(t(o), o, o), i;\n    }\n    function i(t) {\n        return \"json-formatter-\" + t;\n    }\n    function s(t, e, r) {\n        var n = document.createElement(t);\n        return e && n.classList.add(i(e)), void 0 !== r && (r instanceof Node ? n.appendChild(r) : n.appendChild(document.createTextNode(String(r)))), n;\n    }\n    !function(t) {\n        if (t && \"undefined\" != typeof window) {\n            var e = document.createElement(\"style\");\n            e.setAttribute(\"media\", \"screen\"), e.innerHTML = t, document.head.appendChild(e);\n        }\n    }('.json-formatter-row {\\n  font-family: monospace;\\n}\\n.json-formatter-row,\\n.json-formatter-row a,\\n.json-formatter-row a:hover {\\n  color: black;\\n  text-decoration: none;\\n}\\n.json-formatter-row .json-formatter-row {\\n  margin-left: 1rem;\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty {\\n  opacity: 0.5;\\n  margin-left: 1rem;\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty:after {\\n  display: none;\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\\n  content: \"No properties\";\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\\n  content: \"[]\";\\n}\\n.json-formatter-row .json-formatter-string,\\n.json-formatter-row .json-formatter-stringifiable {\\n  color: green;\\n  white-space: pre;\\n  word-wrap: break-word;\\n}\\n.json-formatter-row .json-formatter-number {\\n  color: blue;\\n}\\n.json-formatter-row .json-formatter-boolean {\\n  color: red;\\n}\\n.json-formatter-row .json-formatter-null {\\n  color: #855A00;\\n}\\n.json-formatter-row .json-formatter-undefined {\\n  color: #ca0b69;\\n}\\n.json-formatter-row .json-formatter-function {\\n  color: #FF20ED;\\n}\\n.json-formatter-row .json-formatter-date {\\n  background-color: rgba(0, 0, 0, 0.05);\\n}\\n.json-formatter-row .json-formatter-url {\\n  text-decoration: underline;\\n  color: blue;\\n  cursor: pointer;\\n}\\n.json-formatter-row .json-formatter-bracket {\\n  color: blue;\\n}\\n.json-formatter-row .json-formatter-key {\\n  color: #00008B;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-row .json-formatter-toggler-link {\\n  cursor: pointer;\\n}\\n.json-formatter-row .json-formatter-toggler {\\n  line-height: 1.2rem;\\n  font-size: 0.7rem;\\n  vertical-align: middle;\\n  opacity: 0.6;\\n  cursor: pointer;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-row .json-formatter-toggler:after {\\n  display: inline-block;\\n  transition: transform 100ms ease-in;\\n  content: \"\\u25BA\";\\n}\\n.json-formatter-row > a > .json-formatter-preview-text {\\n  opacity: 0;\\n  transition: opacity 0.15s ease-in;\\n  font-style: italic;\\n}\\n.json-formatter-row:hover > a > .json-formatter-preview-text {\\n  opacity: 0.6;\\n}\\n.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\\n  transform: rotate(90deg);\\n}\\n.json-formatter-row.json-formatter-open > .json-formatter-children:after {\\n  display: inline-block;\\n}\\n.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\\n  display: none;\\n}\\n.json-formatter-row.json-formatter-open.json-formatter-empty:after {\\n  display: block;\\n}\\n.json-formatter-dark.json-formatter-row {\\n  font-family: monospace;\\n}\\n.json-formatter-dark.json-formatter-row,\\n.json-formatter-dark.json-formatter-row a,\\n.json-formatter-dark.json-formatter-row a:hover {\\n  color: white;\\n  text-decoration: none;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-row {\\n  margin-left: 1rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty {\\n  opacity: 0.5;\\n  margin-left: 1rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty:after {\\n  display: none;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\\n  content: \"No properties\";\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\\n  content: \"[]\";\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-string,\\n.json-formatter-dark.json-formatter-row .json-formatter-stringifiable {\\n  color: #31F031;\\n  white-space: pre;\\n  word-wrap: break-word;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-number {\\n  color: #66C2FF;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-boolean {\\n  color: #EC4242;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-null {\\n  color: #EEC97D;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-undefined {\\n  color: #ef8fbe;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-function {\\n  color: #FD48CB;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-date {\\n  background-color: rgba(255, 255, 255, 0.05);\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-url {\\n  text-decoration: underline;\\n  color: #027BFF;\\n  cursor: pointer;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-bracket {\\n  color: #9494FF;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-key {\\n  color: #23A0DB;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-toggler-link {\\n  cursor: pointer;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-toggler {\\n  line-height: 1.2rem;\\n  font-size: 0.7rem;\\n  vertical-align: middle;\\n  opacity: 0.6;\\n  cursor: pointer;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-toggler:after {\\n  display: inline-block;\\n  transition: transform 100ms ease-in;\\n  content: \"\\u25BA\";\\n}\\n.json-formatter-dark.json-formatter-row > a > .json-formatter-preview-text {\\n  opacity: 0;\\n  transition: opacity 0.15s ease-in;\\n  font-style: italic;\\n}\\n.json-formatter-dark.json-formatter-row:hover > a > .json-formatter-preview-text {\\n  opacity: 0.6;\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\\n  transform: rotate(90deg);\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-children:after {\\n  display: inline-block;\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\\n  display: none;\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open.json-formatter-empty:after {\\n  display: block;\\n}\\n');\n    var a = /(^\\d{1,4}[\\.|\\\\/|-]\\d{1,2}[\\.|\\\\/|-]\\d{1,4})(\\s*(?:0?[1-9]:[0-5]|1(?=[012])\\d:[0-5])\\d\\s*[ap]m)?$/, f = /\\d{2}:\\d{2}:\\d{2} GMT-\\d{4}/, m = /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/, l = window.requestAnimationFrame || function(t) {\n        return t(), 0;\n    }, d = {\n        hoverPreviewEnabled: !1,\n        hoverPreviewArrayCount: 100,\n        hoverPreviewFieldCount: 5,\n        animateOpen: !0,\n        animateClose: !0,\n        theme: null,\n        useToJSON: !0,\n        sortPropertiesBy: null\n    };\n    return function() {\n        function c(t, e, r, n) {\n            void 0 === e && (e = 1), void 0 === r && (r = d), this.json = t, this.open = e, this.config = r, this.key = n, this._isOpen = null, void 0 === this.config.hoverPreviewEnabled && (this.config.hoverPreviewEnabled = d.hoverPreviewEnabled), void 0 === this.config.hoverPreviewArrayCount && (this.config.hoverPreviewArrayCount = d.hoverPreviewArrayCount), void 0 === this.config.hoverPreviewFieldCount && (this.config.hoverPreviewFieldCount = d.hoverPreviewFieldCount), void 0 === this.config.useToJSON && (this.config.useToJSON = d.useToJSON), \"\" === this.key && (this.key = '\"\"');\n        }\n        return Object.defineProperty(c.prototype, \"isOpen\", {\n            get: function() {\n                return null !== this._isOpen ? this._isOpen : this.open > 0;\n            },\n            set: function(t) {\n                this._isOpen = t;\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"isDate\", {\n            get: function() {\n                return this.json instanceof Date || \"string\" === this.type && (a.test(this.json) || m.test(this.json) || f.test(this.json));\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"isUrl\", {\n            get: function() {\n                return \"string\" === this.type && 0 === this.json.indexOf(\"http\");\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"isArray\", {\n            get: function() {\n                return Array.isArray(this.json);\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"isObject\", {\n            get: function() {\n                return e(this.json);\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"isEmptyObject\", {\n            get: function() {\n                return !this.keys.length && !this.isArray;\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"isEmpty\", {\n            get: function() {\n                return this.isEmptyObject || this.keys && !this.keys.length && this.isArray;\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"useToJSON\", {\n            get: function() {\n                return this.config.useToJSON && \"stringifiable\" === this.type;\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"hasKey\", {\n            get: function() {\n                return void 0 !== this.key;\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"constructorName\", {\n            get: function() {\n                return r(this.json);\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"type\", {\n            get: function() {\n                return this.config.useToJSON && this.json && this.json.toJSON ? \"stringifiable\" : t(this.json);\n            },\n            enumerable: !0,\n            configurable: !0\n        }), Object.defineProperty(c.prototype, \"keys\", {\n            get: function() {\n                if (this.isObject) {\n                    var t = Object.keys(this.json);\n                    return !this.isArray && this.config.sortPropertiesBy ? t.sort(this.config.sortPropertiesBy) : t;\n                }\n                return [];\n            },\n            enumerable: !0,\n            configurable: !0\n        }), c.prototype.toggleOpen = function() {\n            this.isOpen = !this.isOpen, this.element && (this.isOpen ? this.appendChildren(this.config.animateOpen) : this.removeChildren(this.config.animateClose), this.element.classList.toggle(i(\"open\")));\n        }, c.prototype.openAtDepth = function(t) {\n            void 0 === t && (t = 1), t < 0 || (this.open = t, this.isOpen = 0 !== t, this.element && (this.removeChildren(!1), 0 === t ? this.element.classList.remove(i(\"open\")) : (this.appendChildren(this.config.animateOpen), this.element.classList.add(i(\"open\")))));\n        }, c.prototype.getInlinepreview = function() {\n            var t = this;\n            if (this.isArray) return this.json.length > this.config.hoverPreviewArrayCount ? \"Array[\" + this.json.length + \"]\" : \"[\" + this.json.map(o).join(\", \") + \"]\";\n            var e = this.keys, r = e.slice(0, this.config.hoverPreviewFieldCount).map(function(e) {\n                return e + \":\" + o(t.json[e]);\n            }), n = e.length >= this.config.hoverPreviewFieldCount ? \"\\u2026\" : \"\";\n            return \"{\" + r.join(\", \") + n + \"}\";\n        }, c.prototype.render = function() {\n            this.element = s(\"div\", \"row\");\n            var t = this.isObject ? s(\"a\", \"toggler-link\") : s(\"span\");\n            if (this.isObject && !this.useToJSON && t.appendChild(s(\"span\", \"toggler\")), this.hasKey && t.appendChild(s(\"span\", \"key\", this.key + \":\")), this.isObject && !this.useToJSON) {\n                var e = s(\"span\", \"value\"), r = s(\"span\"), o = s(\"span\", \"constructor-name\", this.constructorName);\n                if (r.appendChild(o), this.isArray) {\n                    var a = s(\"span\");\n                    a.appendChild(s(\"span\", \"bracket\", \"[\")), a.appendChild(s(\"span\", \"number\", this.json.length)), a.appendChild(s(\"span\", \"bracket\", \"]\")), r.appendChild(a);\n                }\n                e.appendChild(r), t.appendChild(e);\n            } else {\n                (e = this.isUrl ? s(\"a\") : s(\"span\")).classList.add(i(this.type)), this.isDate && e.classList.add(i(\"date\")), this.isUrl && (e.classList.add(i(\"url\")), e.setAttribute(\"href\", this.json));\n                var f = n(this.type, this.json, this.useToJSON ? this.json.toJSON() : this.json);\n                e.appendChild(document.createTextNode(f)), t.appendChild(e);\n            }\n            if (this.isObject && this.config.hoverPreviewEnabled) {\n                var m = s(\"span\", \"preview-text\");\n                m.appendChild(document.createTextNode(this.getInlinepreview())), t.appendChild(m);\n            }\n            var l = s(\"div\", \"children\");\n            return this.isObject && l.classList.add(i(\"object\")), this.isArray && l.classList.add(i(\"array\")), this.isEmpty && l.classList.add(i(\"empty\")), this.config && this.config.theme && this.element.classList.add(i(this.config.theme)), this.isOpen && this.element.classList.add(i(\"open\")), this.element.appendChild(t), this.element.appendChild(l), this.isObject && this.isOpen && this.appendChildren(), this.isObject && !this.useToJSON && t.addEventListener(\"click\", this.toggleOpen.bind(this)), this.element;\n        }, c.prototype.appendChildren = function(t) {\n            var e = this;\n            void 0 === t && (t = !1);\n            var r = this.element.querySelector(\"div.\" + i(\"children\"));\n            if (r && !this.isEmpty) {\n                if (t) {\n                    var n = 0, o = function() {\n                        var t = e.keys[n], i = new c(e.json[t], e.open - 1, e.config, t);\n                        r.appendChild(i.render()), (n += 1) < e.keys.length && (n > 10 ? o() : l(o));\n                    };\n                    l(o);\n                } else this.keys.forEach(function(t) {\n                    var n = new c(e.json[t], e.open - 1, e.config, t);\n                    r.appendChild(n.render());\n                });\n            }\n        }, c.prototype.removeChildren = function(t) {\n            void 0 === t && (t = !1);\n            var e = this.element.querySelector(\"div.\" + i(\"children\"));\n            if (t) {\n                var r = 0, n = function() {\n                    e && e.children.length && (e.removeChild(e.children[0]), (r += 1) > 10 ? n() : l(n));\n                };\n                l(n);\n            } else e && (e.innerHTML = \"\");\n        }, c;\n    }();\n});\n\n\nconst $643a24bb97fe0e85$var$formatterConfig = {\n    animateOpen: true,\n    animateClose: true\n};\nfunction $643a24bb97fe0e85$var$renderAuthResponse(response) {\n    document.getElementById(\"responseContainer\").replaceChildren(new (0, (/*@__PURE__*/$parcel$interopDefault($d6b3afe7d584901c$exports)))(response, 2, $643a24bb97fe0e85$var$formatterConfig).render());\n    document.getElementById(\"idTokenContainer\").replaceChildren(new (0, (/*@__PURE__*/$parcel$interopDefault($d6b3afe7d584901c$exports)))((0, $1d7a13d85044de1b$export$2e2bcd8739ae039).decode(response.id_token), 2, $643a24bb97fe0e85$var$formatterConfig).render());\n    document.getElementById(\"accessTokenContainer\").replaceChildren(new (0, (/*@__PURE__*/$parcel$interopDefault($d6b3afe7d584901c$exports)))((0, $1d7a13d85044de1b$export$2e2bcd8739ae039).decode(response.access_token), 2, $643a24bb97fe0e85$var$formatterConfig).render());\n}\nfunction $643a24bb97fe0e85$var$renderLoginError(title, text) {\n    document.getElementById(\"responseContainer\").innerHTML = `<article class=\"card error\">\n  <header>\n    <h3>${title}</h3>\n  </header>\n  <p>${text}</p>\n  </article>`;\n}\nfunction $643a24bb97fe0e85$var$renderUserInfo(response) {\n    document.getElementById(\"userinfoContainer\").replaceChildren(new (0, (/*@__PURE__*/$parcel$interopDefault($d6b3afe7d584901c$exports)))(response, 2, $643a24bb97fe0e85$var$formatterConfig).render());\n}\nfunction $643a24bb97fe0e85$var$renderNotification(type, text) {\n    const notification = document.createElement(\"label\");\n    notification.classList.add(\"notification\");\n    notification.innerHTML = `<input type=\"checkbox\" class=\"alertCheckbox\" autocomplete=\"off\" />\n  <div class=\"alert ${type}\">\n    <span class=\"alertClose\">X</span>\n    <span class=\"alertText\">${text}</span>\n  </div>`;\n    document.getElementById(\"notificationContainer\").prepend(notification);\n}\nfunction $643a24bb97fe0e85$var$notifySuccess(text) {\n    $643a24bb97fe0e85$var$renderNotification(\"success\", text);\n}\nfunction $643a24bb97fe0e85$var$notifyInfo(text) {\n    $643a24bb97fe0e85$var$renderNotification(\"info\", text);\n}\nfunction $643a24bb97fe0e85$var$notifyError(text) {\n    $643a24bb97fe0e85$var$renderNotification(\"error\", text);\n}\nvar $643a24bb97fe0e85$export$2e2bcd8739ae039 = {\n    renderAuthResponse: $643a24bb97fe0e85$var$renderAuthResponse,\n    renderLoginError: $643a24bb97fe0e85$var$renderLoginError,\n    renderUserInfo: $643a24bb97fe0e85$var$renderUserInfo,\n    notifySuccess: $643a24bb97fe0e85$var$notifySuccess,\n    notifyInfo: $643a24bb97fe0e85$var$notifyInfo,\n    notifyError: $643a24bb97fe0e85$var$notifyError\n};\n\n\n/**\r\n * Handles all configuration options for the application in a generic way. Contains no domain specific logic or config settings.\r\n * A config is a flat JSON object. Session storage is used to persist this config object across requests.\r\n */ // Loads config from session storage, updates config object, populates values to input elements.\nfunction $13a32a5f5f1c9c3c$var$load(defaultConfig) {\n    let config = {\n        ...defaultConfig\n    };\n    // Try to load config\n    let sessionConfig;\n    try {\n        sessionConfig = window.sessionStorage.getItem(\"config\");\n    } catch (error) {\n        console.log(\"Failed loading config from sessionStorage\", error);\n    }\n    if (sessionConfig) {\n        console.log(\"Config from session storage available: \" + sessionConfig);\n        try {\n            config = JSON.parse(sessionConfig);\n        } catch (error) {\n            // Remove unparsable config\n            window.sessionStorage.removeItem(\"config\");\n        }\n    }\n    return $13a32a5f5f1c9c3c$var$writeInputElements(config);\n}\n// Merge config options from URL parameters into provided config. \n// All keys present in provided config object can also be provided as URL parameter.\nfunction $13a32a5f5f1c9c3c$var$readFromUrl(config, urlSearchParamEntries) {\n    let mergedConfig = {\n        ...config\n    };\n    console.log(\"Following config properties can be provided as URL parameters: \" + Object.keys(config).join(', '));\n    for (const [key, value] of urlSearchParamEntries)if (key in config) {\n        console.log(`Config option provided as URL parameter: ${key}=${value}`);\n        mergedConfig[key] = value;\n    }\n    return $13a32a5f5f1c9c3c$var$writeInputElements(mergedConfig);\n}\n// Populate config object to input elements and return the same unmodified config object.\n// This should be done when code (and not user) modified the config object.\nfunction $13a32a5f5f1c9c3c$var$writeInputElements(config) {\n    for(const prop in config){\n        const node = document.getElementById(prop);\n        if (node) node.value = config[prop];\n    }\n    return config;\n}\nfunction $13a32a5f5f1c9c3c$var$readInputElements(config) {\n    // Read from input elements\n    for(const prop in config){\n        const node = document.getElementById(prop);\n        if (node) config[prop] = node.value;\n    }\n    return config;\n}\n// Fills values from input to config object and stores config object in session storage.\n// This should be done when the user starts an operation which uses the config.\nfunction $13a32a5f5f1c9c3c$var$storeInputValues(config) {\n    config = $13a32a5f5f1c9c3c$var$readInputElements(config);\n    window.sessionStorage.setItem(\"config\", JSON.stringify(config));\n}\nfunction $13a32a5f5f1c9c3c$var$reset(defaultConfig) {\n    window.sessionStorage.removeItem(\"config\");\n    return $13a32a5f5f1c9c3c$var$load(defaultConfig);\n}\nvar $13a32a5f5f1c9c3c$export$2e2bcd8739ae039 = {\n    load: $13a32a5f5f1c9c3c$var$load,\n    readFromUrl: $13a32a5f5f1c9c3c$var$readFromUrl,\n    writeInputElements: $13a32a5f5f1c9c3c$var$writeInputElements,\n    readInputElements: $13a32a5f5f1c9c3c$var$readInputElements,\n    storeInputValues: $13a32a5f5f1c9c3c$var$storeInputValues,\n    reset: $13a32a5f5f1c9c3c$var$reset\n};\n\n\n\n\nconst $2463cc6bd770c448$var$formatterConfig = {\n    animateOpen: true,\n    animateClose: true\n};\nfunction $2463cc6bd770c448$var$renderResponse(response) {\n    document.getElementById(\"storedTokens\").hidden = false;\n    document.getElementById(\"idpResponseContainer\").replaceChildren(new (0, (/*@__PURE__*/$parcel$interopDefault($d6b3afe7d584901c$exports)))(response, 2, $2463cc6bd770c448$var$formatterConfig).render());\n    document.getElementById(\"idpIdTokenContainer\").replaceChildren(new (0, (/*@__PURE__*/$parcel$interopDefault($d6b3afe7d584901c$exports)))((0, $1d7a13d85044de1b$export$2e2bcd8739ae039).decode(response.id_token), 2, $2463cc6bd770c448$var$formatterConfig).render());\n    document.getElementById(\"idpAccessTokenContainer\").replaceChildren(new (0, (/*@__PURE__*/$parcel$interopDefault($d6b3afe7d584901c$exports)))((0, $1d7a13d85044de1b$export$2e2bcd8739ae039).decode(response.access_token), 2, $2463cc6bd770c448$var$formatterConfig).render());\n}\nfunction $2463cc6bd770c448$var$renderHideResponse() {\n    document.getElementById(\"storedTokens\").hidden = true;\n}\n// Get tokens of brokered IdP if ID token contains claim \"idp_alias\"\n// The user and the client need to have client role broker.read-token, otherwise the request will fail\nasync function $2463cc6bd770c448$var$fetchIdpIdToken(bearerToken, idTokenEncoded) {\n    // Check if URL for fetching ID token of target IdP is available as claim in ID token\n    if (idTokenEncoded == null) {\n        console.log(\"Original tokens could not be be fetched: No ID token available\");\n        $2463cc6bd770c448$var$renderHideResponse();\n        return;\n    }\n    const idToken = (0, $1d7a13d85044de1b$export$2e2bcd8739ae039).decode(idTokenEncoded);\n    if (idToken.claims.idp_alias == null) {\n        console.log(\"Original tokens could not be be fetched: Claim 'idp_alias' not present in ID token\");\n        $2463cc6bd770c448$var$renderHideResponse();\n        return;\n    }\n    // Build URL to fetch tokens:\n    // - Keycloak URL has pattern \"https://{host}/auth/realms/{realm}/broker/{alias}/token\"\n    // - Issuer is \"https://{host}/auth/realms/{realm}\"\n    const iss = idToken.claims.iss;\n    const idp_alias = idToken.claims.idp_alias;\n    const url = `${iss}/broker/${idp_alias}/token`;\n    // Fetch tokens\n    fetch(url, {\n        headers: {\n            Accept: \"application/json\",\n            Authorization: \"Bearer \" + bearerToken\n        }\n    }).then((response)=>response.json()).then((data)=>{\n        console.log(\"Original tokens could be fetched.\");\n        $2463cc6bd770c448$var$renderResponse(data);\n    }).catch((error)=>{\n        console.log(\"Could not fetch token. Cross-Origin Request Blocked? Please check if the user has role 'broker.read-token' and the access token has the role listed at claim resource_access.\");\n        console.error(\"Error:\", error);\n    });\n}\nvar $2463cc6bd770c448$export$2e2bcd8739ae039 = {\n    fetchIdpIdToken: $2463cc6bd770c448$var$fetchIdpIdToken\n};\n\n\nconst $208ea963584ef811$var$ID_TOKEN_KEY = \"idToken\";\nfunction $208ea963584ef811$var$store(idTokenEncoded) {\n    window.sessionStorage.setItem($208ea963584ef811$var$ID_TOKEN_KEY, idTokenEncoded);\n}\nfunction $208ea963584ef811$var$get() {\n    return window.sessionStorage.getItem($208ea963584ef811$var$ID_TOKEN_KEY);\n}\nfunction $208ea963584ef811$var$discard() {\n    window.sessionStorage.removeItem($208ea963584ef811$var$ID_TOKEN_KEY);\n}\nvar $208ea963584ef811$export$2e2bcd8739ae039 = {\n    store: $208ea963584ef811$var$store,\n    get: $208ea963584ef811$var$get,\n    discard: $208ea963584ef811$var$discard\n};\n\n\nvar $aca172697686d5c7$var$logoutButtonElement;\nfunction $aca172697686d5c7$var$init(logoutEndpoint, idTokenProviderFn, onLogout) {\n    $aca172697686d5c7$var$logoutButtonElement = document.getElementById(\"logoutButton\");\n    $aca172697686d5c7$var$logoutButtonElement.onclick = function() {\n        if (!logoutEndpoint || logoutEndpoint.length === 0) {\n            alert(\"No logout endpoint configured.\");\n            return;\n        }\n        const postLogoutRedirectUri = window.location.origin + \"/\";\n        let endSessionUrl = $aca172697686d5c7$var$_buildEndSessionUrl(logoutEndpoint, idTokenProviderFn(), postLogoutRedirectUri);\n        onLogout();\n        // Navigate to Logout endpoint of IdP\n        window.location = endSessionUrl;\n    };\n}\n// To be called on successful login to show the logout button\nfunction $aca172697686d5c7$var$onLogin() {\n    $aca172697686d5c7$var$logoutButtonElement.hidden = false;\n}\nfunction $aca172697686d5c7$var$_buildEndSessionUrl(logoutEndpoint, idTokenEncoded, postLogoutRedirectUri) {\n    return `${logoutEndpoint}?id_token_hint=${idTokenEncoded}&post_logout_redirect_uri=${postLogoutRedirectUri}`;\n}\nvar $aca172697686d5c7$export$2e2bcd8739ae039 = {\n    init: $aca172697686d5c7$var$init,\n    onLogin: $aca172697686d5c7$var$onLogin\n};\n\n\nvar $f50b8c9883cb4c2c$var$refreshButtonElement;\n// Init method to find the HTML element which triggers the refresh and handle the click.\nfunction $f50b8c9883cb4c2c$var$init(config, onResponse, onError) {\n    $f50b8c9883cb4c2c$var$refreshButtonElement = document.getElementById(\"refreshButton\");\n    $f50b8c9883cb4c2c$var$refreshButtonElement.onclick = function() {\n        $f50b8c9883cb4c2c$var$_refreshRequest(config, onResponse, onError);\n    };\n}\nfunction $f50b8c9883cb4c2c$var$_showButton() {\n    $f50b8c9883cb4c2c$var$refreshButtonElement.hidden = false;\n}\nfunction $f50b8c9883cb4c2c$var$tokenReceived(refreshToken) {\n    $f50b8c9883cb4c2c$var$_showButton();\n    window.sessionStorage.setItem(\"refreshToken\", refreshToken);\n}\n// To be called when logout is perfromed. Discards the refrehs token.\nfunction $f50b8c9883cb4c2c$var$onLogout() {\n    window.sessionStorage.removeItem(\"refreshToken\");\n}\nfunction $f50b8c9883cb4c2c$var$_refreshRequest(config, onResponse, onError) {\n    let refreshToken = window.sessionStorage.getItem(\"refreshToken\");\n    if (!refreshToken) {\n        console.warn(\"No refresh token available\");\n        return;\n    }\n    // Build and send refresh token request\n    // https://www.oauth.com/oauth2-servers/making-authenticated-requests/refreshing-an-access-token/\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n        if (xhr.status === 200) onResponse(xhr.response);\n        else onError(xhr.reponse);\n    };\n    xhr.responseType = \"json\";\n    xhr.open(\"POST\", config.tokenEndpoint, true);\n    xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhr.send(new URLSearchParams({\n        client_id: config.clientId,\n        grant_type: \"refresh_token\",\n        refresh_token: refreshToken\n    }));\n}\nvar $f50b8c9883cb4c2c$export$2e2bcd8739ae039 = {\n    init: $f50b8c9883cb4c2c$var$init,\n    tokenReceived: $f50b8c9883cb4c2c$var$tokenReceived,\n    onLogout: $f50b8c9883cb4c2c$var$onLogout\n};\n\n\nvar $0e807c677b624126$var$userinfoButtonElement;\nvar $0e807c677b624126$var$accessToken;\n// Init method to find the HTML element which triggers the userinfo request.\nfunction $0e807c677b624126$var$init(config, onResponse, onError) {\n    $0e807c677b624126$var$userinfoButtonElement = document.getElementById(\"userinfoButton\");\n    $0e807c677b624126$var$userinfoButtonElement.onclick = function() {\n        $0e807c677b624126$var$_userinfoRequest(config.userinfoEndpoint, onResponse, onError);\n    };\n}\nfunction $0e807c677b624126$var$onLogin(accessTokenJwt) {\n    $0e807c677b624126$var$userinfoButtonElement.hidden = false;\n    $0e807c677b624126$var$accessToken = accessTokenJwt;\n}\nfunction $0e807c677b624126$var$_userinfoRequest(userInfoEndpoint, onResponse, onError) {\n    var xhr = new XMLHttpRequest();\n    xhr.onload = function() {\n        if (xhr.status === 200) onResponse(xhr.response);\n        else onError(xhr.reponse);\n    };\n    xhr.responseType = \"json\";\n    xhr.open(\"GET\", userInfoEndpoint, true);\n    xhr.setRequestHeader(\"Authorization\", \"Bearer \" + $0e807c677b624126$var$accessToken);\n    xhr.send();\n}\nvar $0e807c677b624126$export$2e2bcd8739ae039 = {\n    init: $0e807c677b624126$var$init,\n    onLogin: $0e807c677b624126$var$onLogin\n};\n\n\nlet $7afa7c6a5c436a64$var$discoveryButtonElement;\nlet $7afa7c6a5c436a64$var$discoveryEndpointElement;\nfunction $7afa7c6a5c436a64$var$init(onResponse, onError) {\n    $7afa7c6a5c436a64$var$discoveryButtonElement = document.getElementById(\"discoveryButton\");\n    $7afa7c6a5c436a64$var$discoveryEndpointElement = document.getElementById(\"discoveryEndpoint\");\n    $7afa7c6a5c436a64$var$discoveryButtonElement.onclick = function() {\n        $7afa7c6a5c436a64$var$_discoveryRequest($7afa7c6a5c436a64$var$discoveryEndpointElement.value, onResponse, onError);\n    };\n}\nfunction $7afa7c6a5c436a64$var$load() {\n    $7afa7c6a5c436a64$var$discoveryButtonElement = document.getElementById(\"discoveryButton\");\n    $7afa7c6a5c436a64$var$discoveryButtonElement.click();\n}\nfunction $7afa7c6a5c436a64$var$_discoveryRequest(discoveryEndpointUrl, onResponse, onError) {\n    // Fetch discovery document (https://openid.net/specs/openid-connect-discovery-1_0.html)\n    window.fetch(discoveryEndpointUrl).then(async (response)=>{\n        if (response.ok) onResponse(discoveryEndpointUrl, await response.json());\n        else {\n            console.log(\"Error loading discovery document: \" + response.status);\n            onError(discoveryEndpointUrl, response.status);\n        }\n    }).catch((error)=>{\n        onError(discoveryEndpointUrl, error);\n    });\n}\nvar $7afa7c6a5c436a64$export$2e2bcd8739ae039 = {\n    init: $7afa7c6a5c436a64$var$init,\n    load: $7afa7c6a5c436a64$var$load\n};\n\n\n/**\n * This feature introduces an open redirect into the application.\n * \n * Example:\n * ?response_type=code&client_id=occa&redirect_uri=https%3A%2F%2Fm4hl15.csb.app%2Fforward%3Furl%3Dhttps%3A%2F%2Fexample.com\n*/ // Tries to find an URL parameter in the current location and forwards to this URL.\n// All URL parameters and the hash are passed to the given URL.\nfunction $ee33ab63131240a1$var$forward(window) {\n    var args = new URLSearchParams(window.location.search);\n    var urlParam = args.get(\"url\");\n    if (!urlParam) console.log('Forward route expects parameter \"url\"');\n    else {\n        const forwardUrl = new URL(urlParam);\n        forwardUrl.search = window.location.search;\n        forwardUrl.hash = window.location.hash;\n        // Display a confirmation (aceeptable trade-off if you need an open redirect in your application)\n        if (window.confirm(`Open redirect notice \\n\\nThis page is sending you to an other page and forwards all URL paramaters and the hash:\\n\\n${forwardUrl.hostname}\\n\\nBy clicking OK you risk that your tokens are hijacked. \\nClick Cancel to stay safe.`)) window.location = forwardUrl.href;\n    }\n}\nvar $ee33ab63131240a1$export$2e2bcd8739ae039 = {\n    forward: $ee33ab63131240a1$var$forward\n};\n\n\nconst $2b6e161c9edcf319$var$defaultConfig = {\n    clientId: \"occa\",\n    discoveryEndpoint: \"https://p18.authz.bosch.com/auth/realms/example/.well-known/openid-configuration\",\n    authorizationEndpoint: \"\",\n    tokenEndpoint: \"\",\n    logoutEndpoint: \"\",\n    userinfoEndpoint: \"\",\n    scope: \"openid\",\n    authParams: \"\"\n};\nconst $2b6e161c9edcf319$var$redirectUri = \"https://\" + window.location.host + \"/code\";\n// Render redirectUri\ndocument.getElementById(\"redirectUri\").innerHTML = $2b6e161c9edcf319$var$redirectUri;\n// Button to start auth flow\ndocument.getElementById(\"startButton\").onclick = function() {\n    (0, $13a32a5f5f1c9c3c$export$2e2bcd8739ae039).storeInputValues($2b6e161c9edcf319$var$config);\n    var codeVerifier = (0, $fc457dc040315093$export$2e2bcd8739ae039).generateRandomString(64);\n    Promise.resolve().then(()=>{\n        return (0, $fc457dc040315093$export$2e2bcd8739ae039).generateCodeChallenge(codeVerifier);\n    }).then(function(codeChallenge) {\n        window.sessionStorage.setItem(\"code_verifier\", codeVerifier);\n        const args = new URLSearchParams({\n            response_type: \"code\",\n            client_id: $2b6e161c9edcf319$var$config.clientId,\n            code_challenge_method: (0, $fc457dc040315093$export$2e2bcd8739ae039).challengeMethod(),\n            code_challenge: codeChallenge,\n            redirect_uri: $2b6e161c9edcf319$var$redirectUri,\n            scope: $2b6e161c9edcf319$var$config.scope\n        });\n        let newLocation = $2b6e161c9edcf319$var$config.authorizationEndpoint + \"/?\" + args;\n        // Add additional parameters if any\n        if ($2b6e161c9edcf319$var$config.authParams != null && $2b6e161c9edcf319$var$config.authParams.trim() !== \"\") newLocation += \"&\" + $2b6e161c9edcf319$var$config.authParams;\n        console.log(\"Set new location to start authorization flow: \" + newLocation);\n        window.location = newLocation;\n    });\n};\n// Button to reset config\ndocument.getElementById(\"resetConfig\").onclick = function() {\n    $2b6e161c9edcf319$var$config = (0, $13a32a5f5f1c9c3c$export$2e2bcd8739ae039).reset($2b6e161c9edcf319$var$defaultConfig);\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).notifySuccess('Configuration reset done.');\n};\n// Load config from session storage\nlet $2b6e161c9edcf319$var$config = (0, $13a32a5f5f1c9c3c$export$2e2bcd8739ae039).load($2b6e161c9edcf319$var$defaultConfig);\n// Merge parameters from URL into config\n$2b6e161c9edcf319$var$config = (0, $13a32a5f5f1c9c3c$export$2e2bcd8739ae039).readFromUrl($2b6e161c9edcf319$var$config, new URLSearchParams(window.location.search).entries());\n// When a token response is received, this function is called to render the response\n// and provide the reposne to other UI modules.\nconst $2b6e161c9edcf319$var$handleTokenResponse = function(response) {\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).renderAuthResponse(response);\n    (0, $208ea963584ef811$export$2e2bcd8739ae039).store(response.id_token);\n    (0, $f50b8c9883cb4c2c$export$2e2bcd8739ae039).tokenReceived(response.refresh_token);\n    (0, $aca172697686d5c7$export$2e2bcd8739ae039).onLogin();\n    (0, $0e807c677b624126$export$2e2bcd8739ae039).onLogin(response.access_token);\n};\n// When the token request results in an error, this function is called to render the error\nconst $2b6e161c9edcf319$var$handleTokenError = function(response) {\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).renderLoginError(\"Error requsting token\", response && response.error ? `${response.error}: ${response.error_description}` : `Token endpoint ${$2b6e161c9edcf319$var$config.tokenEndpoint} returned ${$2b6e161c9edcf319$var$xhr.status} ${$2b6e161c9edcf319$var$xhr.statusText}`);\n};\n// Initialize \"Load Discovery document\" functionality and handle discovery doeument response\n(0, $7afa7c6a5c436a64$export$2e2bcd8739ae039).init((discoveryEndpointUrl, discoveryJSON)=>{\n    $2b6e161c9edcf319$var$config = (0, $13a32a5f5f1c9c3c$export$2e2bcd8739ae039).writeInputElements({\n        // ...config, // Merge discovery values into existing persisted config incl. client ID or scope (reset to default this way)\n        ...(0, $13a32a5f5f1c9c3c$export$2e2bcd8739ae039).readInputElements($2b6e161c9edcf319$var$config),\n        discoveryEndpoint: discoveryEndpointUrl,\n        authorizationEndpoint: discoveryJSON.authorization_endpoint,\n        tokenEndpoint: discoveryJSON.token_endpoint,\n        userinfoEndpoint: discoveryJSON.userinfo_endpoint,\n        logoutEndpoint: discoveryJSON.end_session_endpoint\n    });\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).notifySuccess(`Endpoints updated from discovery document ${discoveryEndpointUrl}.`);\n}, (discoveryEndpointUrl, errorMessage)=>{\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).notifyError(`Error response from ${discoveryEndpointUrl}: ${errorMessage}`);\n});\n// Load automatically, so that \"Start login\" could be used right away.\n(0, $7afa7c6a5c436a64$export$2e2bcd8739ae039).load();\n// Initialize Refresh functionality\n(0, $f50b8c9883cb4c2c$export$2e2bcd8739ae039).init($2b6e161c9edcf319$var$config, (response)=>{\n    $2b6e161c9edcf319$var$handleTokenResponse(response);\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).notifySuccess(\"Refresh complete, tokens updated.\");\n}, $2b6e161c9edcf319$var$handleTokenError);\n// Initialize Logout functionality\n(0, $aca172697686d5c7$export$2e2bcd8739ae039).init($2b6e161c9edcf319$var$config.logoutEndpoint, ()=>{\n    return (0, $208ea963584ef811$export$2e2bcd8739ae039).get();\n}, ()=>{\n    (0, $f50b8c9883cb4c2c$export$2e2bcd8739ae039).onLogout();\n    (0, $208ea963584ef811$export$2e2bcd8739ae039).discard();\n});\n(0, $0e807c677b624126$export$2e2bcd8739ae039).init($2b6e161c9edcf319$var$config, (response)=>{\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).renderUserInfo(response);\n    (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).notifySuccess(\"User Info updated.\");\n}, (response)=>{\n    console.log(\"Error from userinfo endpoint: \" + response);\n});\n// An open rdirect vulnerability under path /forward which also sends all original URL query parameters\nif (window.location.pathname === \"/forward\") (0, $ee33ab63131240a1$export$2e2bcd8739ae039).forward(window);\n// Check if code is provided on callback from auth server\nif (window.location.pathname === \"/code\") {\n    var $2b6e161c9edcf319$var$args = new URLSearchParams(window.location.search);\n    var $2b6e161c9edcf319$var$code = $2b6e161c9edcf319$var$args.get(\"code\");\n    if ($2b6e161c9edcf319$var$code) {\n        var $2b6e161c9edcf319$var$xhr = new XMLHttpRequest();\n        $2b6e161c9edcf319$var$xhr.onload = function() {\n            var response = $2b6e161c9edcf319$var$xhr.response;\n            if ($2b6e161c9edcf319$var$xhr.status === 200) {\n                $2b6e161c9edcf319$var$handleTokenResponse(response);\n                (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).notifySuccess(\"Login successful, tokens retrieved.\");\n                (0, $2463cc6bd770c448$export$2e2bcd8739ae039).fetchIdpIdToken(response.access_token, response.id_token);\n            } else $2b6e161c9edcf319$var$handleTokenError(response);\n            // Set navigation state to top-level URL without URL params\n            history.pushState(\"\", document.title, window.location.origin);\n        };\n        $2b6e161c9edcf319$var$xhr.responseType = \"json\";\n        $2b6e161c9edcf319$var$xhr.open(\"POST\", $2b6e161c9edcf319$var$config.tokenEndpoint, true);\n        $2b6e161c9edcf319$var$xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        $2b6e161c9edcf319$var$xhr.send(new URLSearchParams({\n            client_id: $2b6e161c9edcf319$var$config.clientId,\n            code_verifier: window.sessionStorage.getItem(\"code_verifier\"),\n            grant_type: \"authorization_code\",\n            redirect_uri: location.href.replace(location.search, \"\"),\n            code: $2b6e161c9edcf319$var$code\n        }));\n    }\n    let errorDescription = $2b6e161c9edcf319$var$args.get(\"error_description\");\n    if (errorDescription) (0, $643a24bb97fe0e85$export$2e2bcd8739ae039).renderLoginError(\"Error on login\", errorDescription);\n}\n\n\n//# sourceMappingURL=OCCA.fe21df6e.js.map\n","import PKCE from \"./util/pkce\";\nimport Render from \"./util/render\";\nimport Config from \"./util/config\";\nimport BrokeredToken from \"./keycloak/brokeredToken\";\nimport IdTokenStore from \"./util/idTokenStore\";\nimport Logout from \"./logout/logout\";\nimport Refresh from \"./refresh/refresh\";\nimport Userinfo from \"./userinfo/userinfo\";\nimport Discovery from \"./util/discovery\";\nimport OpenRedirect from \"./vulnerabilities/openRedirect\";\n\nconst defaultConfig = {\n  clientId: \"occa\",\n  discoveryEndpoint: \"https://p18.authz.bosch.com/auth/realms/example/.well-known/openid-configuration\",\n  authorizationEndpoint: \"\",\n  tokenEndpoint: \"\",\n  logoutEndpoint: \"\",\n  userinfoEndpoint: \"\",\n  scope: \"openid\",\n  authParams: \"\",\n};\n\nconst redirectUri = \"https://\" + window.location.host + \"/code\";\n\n// Render redirectUri\ndocument.getElementById(\"redirectUri\").innerHTML = redirectUri;\n\n// Button to start auth flow\ndocument.getElementById(\"startButton\").onclick = function () {\n  Config.storeInputValues(config);\n\n  var codeVerifier = PKCE.generateRandomString(64);\n\n  Promise.resolve()\n    .then(() => {\n      return PKCE.generateCodeChallenge(codeVerifier);\n    })\n    .then(function (codeChallenge) {\n      window.sessionStorage.setItem(\"code_verifier\", codeVerifier);\n\n      const args = new URLSearchParams({\n        response_type: \"code\",\n        client_id: config.clientId,\n        code_challenge_method: PKCE.challengeMethod(),\n        code_challenge: codeChallenge,\n        redirect_uri: redirectUri,\n        scope: config.scope,\n      });\n      let newLocation = config.authorizationEndpoint + \"/?\" + args;\n      // Add additional parameters if any\n      if (config.authParams != null && config.authParams.trim() !== \"\") {\n        newLocation += \"&\" + config.authParams;\n      }\n      console.log(\n        \"Set new location to start authorization flow: \" + newLocation\n      );\n      window.location = newLocation;\n    });\n};\n\n// Button to reset config\ndocument.getElementById(\"resetConfig\").onclick = function () {\n  config = Config.reset(defaultConfig);\n  Render.notifySuccess('Configuration reset done.');\n};\n\n// Load config from session storage\nlet config = Config.load(defaultConfig);\n// Merge parameters from URL into config\nconfig = Config.readFromUrl(config, new URLSearchParams(window.location.search).entries());\n\n// When a token response is received, this function is called to render the response\n// and provide the reposne to other UI modules.\nconst handleTokenResponse = function (response) {\n  Render.renderAuthResponse(response);\n  IdTokenStore.store(response.id_token);\n  Refresh.tokenReceived(response.refresh_token);\n  Logout.onLogin();\n  Userinfo.onLogin(response.access_token);\n};\n\n// When the token request results in an error, this function is called to render the error\nconst handleTokenError = function (response) {\n  Render.renderLoginError(\n    \"Error requsting token\",\n    response && response.error\n      ? `${response.error}: ${response.error_description}`\n      : `Token endpoint ${config.tokenEndpoint} returned ${xhr.status} ${xhr.statusText}`\n  );\n};\n\n// Initialize \"Load Discovery document\" functionality and handle discovery doeument response\nDiscovery.init(\n  (discoveryEndpointUrl, discoveryJSON) => {\n  config = Config.writeInputElements({\n      // ...config, // Merge discovery values into existing persisted config incl. client ID or scope (reset to default this way)\n      ...Config.readInputElements(config),\n      discoveryEndpoint: discoveryEndpointUrl, // Persist URL from input\n      authorizationEndpoint: discoveryJSON.authorization_endpoint,\n      tokenEndpoint: discoveryJSON.token_endpoint,\n      userinfoEndpoint: discoveryJSON.userinfo_endpoint,\n      logoutEndpoint: discoveryJSON.end_session_endpoint,\n    });\n    Render.notifySuccess(`Endpoints updated from discovery document ${discoveryEndpointUrl}.`);\n  },\n  (discoveryEndpointUrl, errorMessage) => {\n    Render.notifyError(`Error response from ${discoveryEndpointUrl}: ${errorMessage}`);\n  }\n);\n// Load automatically, so that \"Start login\" could be used right away.\nDiscovery.load();\n\n// Initialize Refresh functionality\nRefresh.init(\n  config, \n  (response) => { handleTokenResponse(response); Render.notifySuccess(\"Refresh complete, tokens updated.\"); },\n  handleTokenError\n);\n\n// Initialize Logout functionality\nLogout.init(\n  config.logoutEndpoint,\n  () => {\n    return IdTokenStore.get();\n  },\n  () => {\n    Refresh.onLogout();\n    IdTokenStore.discard();\n  }\n);\n\nUserinfo.init(\n  config,\n  (response) => {\n    Render.renderUserInfo(response);\n    Render.notifySuccess(\"User Info updated.\");    \n  },\n  (response) => {\n    console.log(\"Error from userinfo endpoint: \" + response);\n  }\n);\n\n// An open rdirect vulnerability under path /forward which also sends all original URL query parameters\nif(window.location.pathname === \"/forward\") {\n  OpenRedirect.forward(window);\n}\n\n// Check if code is provided on callback from auth server\nif (window.location.pathname === \"/code\") {\n  var args = new URLSearchParams(window.location.search);\n  var code = args.get(\"code\");\n\n  if (code) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.onload = function () {\n      var response = xhr.response;\n      if (xhr.status === 200) {\n        handleTokenResponse(response);\n        Render.notifySuccess(\"Login successful, tokens retrieved.\");\n        BrokeredToken.fetchIdpIdToken(response.access_token, response.id_token);\n      } else {\n        handleTokenError(response);\n      }\n      // Set navigation state to top-level URL without URL params\n      history.pushState(\"\", document.title, window.location.origin);\n    };\n    xhr.responseType = \"json\";\n    xhr.open(\"POST\", config.tokenEndpoint, true);\n    xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhr.send(\n      new URLSearchParams({\n        client_id: config.clientId,\n        code_verifier: window.sessionStorage.getItem(\"code_verifier\"),\n        grant_type: \"authorization_code\",\n        redirect_uri: location.href.replace(location.search, \"\"),\n        code: code,\n      })\n    );\n  }\n\n  let errorDescription = args.get(\"error_description\");\n  if (errorDescription) {\n    Render.renderLoginError(\"Error on login\", errorDescription);\n  }\n}\n","// Based on code from https://github.com/curityio/pkce-javascript-example which is publichsed under Apache 2.0 License\r\n\r\nconst method = crypto.subtle ? \"S256\" : \"plain\";\r\n_warnIfNoCrypto();\r\n\r\nfunction challengeMethod() {\r\n  return method;\r\n}\r\n\r\nasync function generateCodeChallenge(codeVerifier) {\r\n  if (method === \"S256\") {\r\n    var digest = await crypto.subtle.digest(\r\n      \"SHA-256\",\r\n      new TextEncoder().encode(codeVerifier)\r\n    );\r\n\r\n    return btoa(String.fromCharCode(...new Uint8Array(digest)))\r\n      .replace(/=/g, \"\")\r\n      .replace(/\\+/g, \"-\")\r\n      .replace(/\\//g, \"_\");\r\n  }\r\n  if (method === \"plain\") {\r\n    return codeVerifier;\r\n  }\r\n}\r\n\r\nfunction generateRandomString(length) {\r\n  var text = \"\";\r\n  var possible =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n  for (var i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\nfunction _warnIfNoCrypto() {\r\n  if (!crypto.subtle) {\r\n    console.warn(\r\n      \"<p>\" +\r\n        \"<b>WARNING:</b> The script will fall back to using plain code challenge as crypto is not available.</p>\" +\r\n        '<p>Javascript crypto services require that this site is served in a <a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\">secure context</a>; ' +\r\n        \"either from <b>(*.)localhost</b> or via <b>https</b>. </p>\" +\r\n        '<p> You can add an entry to /etc/hosts like \"127.0.0.1 public-test-client.localhost\" and reload the site from there, enable SSL using something like <a href=\"https://letsencrypt.org/\">letsencypt</a>, or refer to this <a href=\"https://stackoverflow.com/questions/46468104/how-to-use-subtlecrypto-in-chrome-window-crypto-subtle-is-undefined\">stackoverflow article</a> for more alternatives.</p>' +\r\n        \"<p>If Javascript crypto is available this message will disappear.</p>\"\r\n    );\r\n  }\r\n}\r\n\r\nexport default {\r\n  challengeMethod: challengeMethod,\r\n  generateCodeChallenge: generateCodeChallenge,\r\n  generateRandomString: generateRandomString\r\n};\r\n","import JWT from \"./jwt\";\r\nimport JSONFormatter from \"json-formatter-js\";\r\n\r\nconst formatterConfig = {\r\n  animateOpen: true,\r\n  animateClose: true,\r\n};\r\n\r\nfunction renderAuthResponse(response) {\r\n  document\r\n    .getElementById(\"responseContainer\")\r\n    .replaceChildren(new JSONFormatter(response, 2, formatterConfig).render());\r\n  document\r\n    .getElementById(\"idTokenContainer\")\r\n    .replaceChildren(\r\n      new JSONFormatter(\r\n        JWT.decode(response.id_token),\r\n        2,\r\n        formatterConfig\r\n      ).render()\r\n    );\r\n  document\r\n    .getElementById(\"accessTokenContainer\")\r\n    .replaceChildren(\r\n      new JSONFormatter(\r\n        JWT.decode(response.access_token),\r\n        2,\r\n        formatterConfig\r\n      ).render()\r\n    );\r\n}\r\n\r\nfunction renderLoginError(title, text) {\r\n  document.getElementById(\r\n    \"responseContainer\"\r\n  ).innerHTML = `<article class=\"card error\">\r\n  <header>\r\n    <h3>${title}</h3>\r\n  </header>\r\n  <p>${text}</p>\r\n  </article>`;\r\n}\r\n\r\nfunction renderUserInfo(response) {\r\n  document\r\n    .getElementById(\"userinfoContainer\")\r\n    .replaceChildren(new JSONFormatter(response, 2, formatterConfig).render());\r\n}\r\n\r\nfunction renderNotification(type, text) {\r\n  const notification = document.createElement(\"label\");\r\n  notification.classList.add(\"notification\");\r\n  notification.innerHTML = \r\n  `<input type=\"checkbox\" class=\"alertCheckbox\" autocomplete=\"off\" />\r\n  <div class=\"alert ${type}\">\r\n    <span class=\"alertClose\">X</span>\r\n    <span class=\"alertText\">${text}</span>\r\n  </div>`;\r\n  document.getElementById(\"notificationContainer\").prepend(notification);\r\n}\r\n\r\nfunction notifySuccess(text) {\r\n  renderNotification(\"success\", text)\r\n}\r\n\r\nfunction notifyInfo(text) {\r\n  renderNotification(\"info\", text)\r\n}\r\n\r\nfunction notifyError(text) {\r\n  renderNotification(\"error\", text)\r\n}\r\n\r\nexport default {\r\n  renderAuthResponse,\r\n  renderLoginError,\r\n  renderUserInfo,\r\n  notifySuccess,\r\n  notifyInfo,\r\n  notifyError\r\n};\r\n","function decode(jwt) {\r\n  if (!jwt) {\r\n    return \"Error: No token available\";\r\n  }\r\n  let parts = jwt.split(\".\");\r\n  if (parts.length !== 3) {\r\n    return \"Error: Not a JWT, expected three parts separated by a dot.\";\r\n  }\r\n  let header = JSON.parse(base64UrlDecode(parts[0]));\r\n  let claims = JSON.parse(base64UrlDecode(parts[1]));\r\n  return { header: header, claims: claims };\r\n}\r\n\r\nfunction base64UrlDecode(input) {\r\n  // Based on https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\r\n  // Replace replace \"-\" with \"+\" and \"_\" with \"/\"\r\n  let base64 = input.replace(/-/g, '+').replace(/_/g, '/');\r\n  return decodeURIComponent(atob(base64).split('').map(function(c) {\r\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n  }).join(''));\r\n}\r\n\r\nexport default {\r\n  decode: decode\r\n};\r\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=t||self).JSONFormatter=e()}(this,(function(){\"use strict\";function t(t){return null===t?\"null\":typeof t}function e(t){return!!t&&\"object\"==typeof t}function r(t){if(void 0===t)return\"\";if(null===t)return\"Object\";if(\"object\"==typeof t&&!t.constructor)return\"Object\";var e=/function ([^(]*)/.exec(t.constructor.toString());return e&&e.length>1?e[1]:\"\"}function n(t,e,r){return\"null\"===t||\"undefined\"===t?t:(\"string\"!==t&&\"stringifiable\"!==t||(r='\"'+r.replace(/\"/g,'\\\\\"')+'\"'),\"function\"===t?e.toString().replace(/[\\r\\n]/g,\"\").replace(/\\{.*\\}/,\"\")+\"{}\":r)}function o(o){var i=\"\";return e(o)?(i=r(o),Array.isArray(o)&&(i+=\"[\"+o.length+\"]\")):i=n(t(o),o,o),i}function i(t){return\"json-formatter-\"+t}function s(t,e,r){var n=document.createElement(t);return e&&n.classList.add(i(e)),void 0!==r&&(r instanceof Node?n.appendChild(r):n.appendChild(document.createTextNode(String(r)))),n}!function(t){if(t&&\"undefined\"!=typeof window){var e=document.createElement(\"style\");e.setAttribute(\"media\",\"screen\"),e.innerHTML=t,document.head.appendChild(e)}}('.json-formatter-row {\\n  font-family: monospace;\\n}\\n.json-formatter-row,\\n.json-formatter-row a,\\n.json-formatter-row a:hover {\\n  color: black;\\n  text-decoration: none;\\n}\\n.json-formatter-row .json-formatter-row {\\n  margin-left: 1rem;\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty {\\n  opacity: 0.5;\\n  margin-left: 1rem;\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty:after {\\n  display: none;\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\\n  content: \"No properties\";\\n}\\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\\n  content: \"[]\";\\n}\\n.json-formatter-row .json-formatter-string,\\n.json-formatter-row .json-formatter-stringifiable {\\n  color: green;\\n  white-space: pre;\\n  word-wrap: break-word;\\n}\\n.json-formatter-row .json-formatter-number {\\n  color: blue;\\n}\\n.json-formatter-row .json-formatter-boolean {\\n  color: red;\\n}\\n.json-formatter-row .json-formatter-null {\\n  color: #855A00;\\n}\\n.json-formatter-row .json-formatter-undefined {\\n  color: #ca0b69;\\n}\\n.json-formatter-row .json-formatter-function {\\n  color: #FF20ED;\\n}\\n.json-formatter-row .json-formatter-date {\\n  background-color: rgba(0, 0, 0, 0.05);\\n}\\n.json-formatter-row .json-formatter-url {\\n  text-decoration: underline;\\n  color: blue;\\n  cursor: pointer;\\n}\\n.json-formatter-row .json-formatter-bracket {\\n  color: blue;\\n}\\n.json-formatter-row .json-formatter-key {\\n  color: #00008B;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-row .json-formatter-toggler-link {\\n  cursor: pointer;\\n}\\n.json-formatter-row .json-formatter-toggler {\\n  line-height: 1.2rem;\\n  font-size: 0.7rem;\\n  vertical-align: middle;\\n  opacity: 0.6;\\n  cursor: pointer;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-row .json-formatter-toggler:after {\\n  display: inline-block;\\n  transition: transform 100ms ease-in;\\n  content: \"\";\\n}\\n.json-formatter-row > a > .json-formatter-preview-text {\\n  opacity: 0;\\n  transition: opacity 0.15s ease-in;\\n  font-style: italic;\\n}\\n.json-formatter-row:hover > a > .json-formatter-preview-text {\\n  opacity: 0.6;\\n}\\n.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\\n  transform: rotate(90deg);\\n}\\n.json-formatter-row.json-formatter-open > .json-formatter-children:after {\\n  display: inline-block;\\n}\\n.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\\n  display: none;\\n}\\n.json-formatter-row.json-formatter-open.json-formatter-empty:after {\\n  display: block;\\n}\\n.json-formatter-dark.json-formatter-row {\\n  font-family: monospace;\\n}\\n.json-formatter-dark.json-formatter-row,\\n.json-formatter-dark.json-formatter-row a,\\n.json-formatter-dark.json-formatter-row a:hover {\\n  color: white;\\n  text-decoration: none;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-row {\\n  margin-left: 1rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty {\\n  opacity: 0.5;\\n  margin-left: 1rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty:after {\\n  display: none;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\\n  content: \"No properties\";\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\\n  content: \"[]\";\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-string,\\n.json-formatter-dark.json-formatter-row .json-formatter-stringifiable {\\n  color: #31F031;\\n  white-space: pre;\\n  word-wrap: break-word;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-number {\\n  color: #66C2FF;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-boolean {\\n  color: #EC4242;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-null {\\n  color: #EEC97D;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-undefined {\\n  color: #ef8fbe;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-function {\\n  color: #FD48CB;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-date {\\n  background-color: rgba(255, 255, 255, 0.05);\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-url {\\n  text-decoration: underline;\\n  color: #027BFF;\\n  cursor: pointer;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-bracket {\\n  color: #9494FF;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-key {\\n  color: #23A0DB;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-toggler-link {\\n  cursor: pointer;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-toggler {\\n  line-height: 1.2rem;\\n  font-size: 0.7rem;\\n  vertical-align: middle;\\n  opacity: 0.6;\\n  cursor: pointer;\\n  padding-right: 0.2rem;\\n}\\n.json-formatter-dark.json-formatter-row .json-formatter-toggler:after {\\n  display: inline-block;\\n  transition: transform 100ms ease-in;\\n  content: \"\";\\n}\\n.json-formatter-dark.json-formatter-row > a > .json-formatter-preview-text {\\n  opacity: 0;\\n  transition: opacity 0.15s ease-in;\\n  font-style: italic;\\n}\\n.json-formatter-dark.json-formatter-row:hover > a > .json-formatter-preview-text {\\n  opacity: 0.6;\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\\n  transform: rotate(90deg);\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-children:after {\\n  display: inline-block;\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\\n  display: none;\\n}\\n.json-formatter-dark.json-formatter-row.json-formatter-open.json-formatter-empty:after {\\n  display: block;\\n}\\n');var a=/(^\\d{1,4}[\\.|\\\\/|-]\\d{1,2}[\\.|\\\\/|-]\\d{1,4})(\\s*(?:0?[1-9]:[0-5]|1(?=[012])\\d:[0-5])\\d\\s*[ap]m)?$/,f=/\\d{2}:\\d{2}:\\d{2} GMT-\\d{4}/,m=/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/,l=window.requestAnimationFrame||function(t){return t(),0},d={hoverPreviewEnabled:!1,hoverPreviewArrayCount:100,hoverPreviewFieldCount:5,animateOpen:!0,animateClose:!0,theme:null,useToJSON:!0,sortPropertiesBy:null};return function(){function c(t,e,r,n){void 0===e&&(e=1),void 0===r&&(r=d),this.json=t,this.open=e,this.config=r,this.key=n,this._isOpen=null,void 0===this.config.hoverPreviewEnabled&&(this.config.hoverPreviewEnabled=d.hoverPreviewEnabled),void 0===this.config.hoverPreviewArrayCount&&(this.config.hoverPreviewArrayCount=d.hoverPreviewArrayCount),void 0===this.config.hoverPreviewFieldCount&&(this.config.hoverPreviewFieldCount=d.hoverPreviewFieldCount),void 0===this.config.useToJSON&&(this.config.useToJSON=d.useToJSON),\"\"===this.key&&(this.key='\"\"')}return Object.defineProperty(c.prototype,\"isOpen\",{get:function(){return null!==this._isOpen?this._isOpen:this.open>0},set:function(t){this._isOpen=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"isDate\",{get:function(){return this.json instanceof Date||\"string\"===this.type&&(a.test(this.json)||m.test(this.json)||f.test(this.json))},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"isUrl\",{get:function(){return\"string\"===this.type&&0===this.json.indexOf(\"http\")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"isArray\",{get:function(){return Array.isArray(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"isObject\",{get:function(){return e(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"isEmptyObject\",{get:function(){return!this.keys.length&&!this.isArray},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"isEmpty\",{get:function(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"useToJSON\",{get:function(){return this.config.useToJSON&&\"stringifiable\"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"hasKey\",{get:function(){return void 0!==this.key},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"constructorName\",{get:function(){return r(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"type\",{get:function(){return this.config.useToJSON&&this.json&&this.json.toJSON?\"stringifiable\":t(this.json)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,\"keys\",{get:function(){if(this.isObject){var t=Object.keys(this.json);return!this.isArray&&this.config.sortPropertiesBy?t.sort(this.config.sortPropertiesBy):t}return[]},enumerable:!0,configurable:!0}),c.prototype.toggleOpen=function(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(i(\"open\")))},c.prototype.openAtDepth=function(t){void 0===t&&(t=1),t<0||(this.open=t,this.isOpen=0!==t,this.element&&(this.removeChildren(!1),0===t?this.element.classList.remove(i(\"open\")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(i(\"open\")))))},c.prototype.getInlinepreview=function(){var t=this;if(this.isArray)return this.json.length>this.config.hoverPreviewArrayCount?\"Array[\"+this.json.length+\"]\":\"[\"+this.json.map(o).join(\", \")+\"]\";var e=this.keys,r=e.slice(0,this.config.hoverPreviewFieldCount).map((function(e){return e+\":\"+o(t.json[e])})),n=e.length>=this.config.hoverPreviewFieldCount?\"\":\"\";return\"{\"+r.join(\", \")+n+\"}\"},c.prototype.render=function(){this.element=s(\"div\",\"row\");var t=this.isObject?s(\"a\",\"toggler-link\"):s(\"span\");if(this.isObject&&!this.useToJSON&&t.appendChild(s(\"span\",\"toggler\")),this.hasKey&&t.appendChild(s(\"span\",\"key\",this.key+\":\")),this.isObject&&!this.useToJSON){var e=s(\"span\",\"value\"),r=s(\"span\"),o=s(\"span\",\"constructor-name\",this.constructorName);if(r.appendChild(o),this.isArray){var a=s(\"span\");a.appendChild(s(\"span\",\"bracket\",\"[\")),a.appendChild(s(\"span\",\"number\",this.json.length)),a.appendChild(s(\"span\",\"bracket\",\"]\")),r.appendChild(a)}e.appendChild(r),t.appendChild(e)}else{(e=this.isUrl?s(\"a\"):s(\"span\")).classList.add(i(this.type)),this.isDate&&e.classList.add(i(\"date\")),this.isUrl&&(e.classList.add(i(\"url\")),e.setAttribute(\"href\",this.json));var f=n(this.type,this.json,this.useToJSON?this.json.toJSON():this.json);e.appendChild(document.createTextNode(f)),t.appendChild(e)}if(this.isObject&&this.config.hoverPreviewEnabled){var m=s(\"span\",\"preview-text\");m.appendChild(document.createTextNode(this.getInlinepreview())),t.appendChild(m)}var l=s(\"div\",\"children\");return this.isObject&&l.classList.add(i(\"object\")),this.isArray&&l.classList.add(i(\"array\")),this.isEmpty&&l.classList.add(i(\"empty\")),this.config&&this.config.theme&&this.element.classList.add(i(this.config.theme)),this.isOpen&&this.element.classList.add(i(\"open\")),this.element.appendChild(t),this.element.appendChild(l),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&!this.useToJSON&&t.addEventListener(\"click\",this.toggleOpen.bind(this)),this.element},c.prototype.appendChildren=function(t){var e=this;void 0===t&&(t=!1);var r=this.element.querySelector(\"div.\"+i(\"children\"));if(r&&!this.isEmpty)if(t){var n=0,o=function(){var t=e.keys[n],i=new c(e.json[t],e.open-1,e.config,t);r.appendChild(i.render()),(n+=1)<e.keys.length&&(n>10?o():l(o))};l(o)}else this.keys.forEach((function(t){var n=new c(e.json[t],e.open-1,e.config,t);r.appendChild(n.render())}))},c.prototype.removeChildren=function(t){void 0===t&&(t=!1);var e=this.element.querySelector(\"div.\"+i(\"children\"));if(t){var r=0,n=function(){e&&e.children.length&&(e.removeChild(e.children[0]),(r+=1)>10?n():l(n))};l(n)}else e&&(e.innerHTML=\"\")},c}()}));\n","/**\r\n * Handles all configuration options for the application in a generic way. Contains no domain specific logic or config settings.\r\n * A config is a flat JSON object. Session storage is used to persist this config object across requests.\r\n */\r\n\r\n// Loads config from session storage, updates config object, populates values to input elements.\r\nfunction load(defaultConfig) {\r\n  let config = { ...defaultConfig };\r\n\r\n  // Try to load config\r\n  let sessionConfig;\r\n  try {\r\n    sessionConfig = window.sessionStorage.getItem(\"config\");\r\n  } catch (error) {\r\n    console.log(\"Failed loading config from sessionStorage\", error);\r\n  }\r\n\r\n  if (sessionConfig) {\r\n    console.log(\"Config from session storage available: \" + sessionConfig);\r\n    try {\r\n      config = JSON.parse(sessionConfig);\r\n    } catch (error) {\r\n      // Remove unparsable config\r\n      window.sessionStorage.removeItem(\"config\");\r\n    }\r\n  }\r\n  return writeInputElements(config);\r\n}\r\n\r\n// Merge config options from URL parameters into provided config. \r\n// All keys present in provided config object can also be provided as URL parameter.\r\nfunction readFromUrl(config, urlSearchParamEntries) {\r\n  let mergedConfig = { ...config };  \r\n  console.log(\"Following config properties can be provided as URL parameters: \" + Object.keys(config).join(', '));\r\n  for (const [key, value] of urlSearchParamEntries) {\r\n    if( key in config) {\r\n      console.log(`Config option provided as URL parameter: ${key}=${value}`);\r\n      mergedConfig[key] = value;\r\n    }\r\n  }\r\n  return writeInputElements(mergedConfig);\r\n}\r\n\r\n// Populate config object to input elements and return the same unmodified config object.\r\n// This should be done when code (and not user) modified the config object.\r\nfunction writeInputElements(config) {\r\n  for (const prop in config) {\r\n    const node = document.getElementById(prop);\r\n    if (node) {\r\n      node.value = config[prop];\r\n      /*\r\n      console.log(\r\n        `Element value of '${node.id}' set to config[${prop}] = '${config[prop]}'`\r\n      );\r\n      */\r\n    }\r\n  }\r\n  return config;\r\n}\r\n\r\nfunction readInputElements(config) {\r\n  // Read from input elements\r\n  for (const prop in config) {\r\n    const node = document.getElementById(prop);\r\n    if (node) {\r\n      config[prop] = node.value;\r\n      /*\r\n      console.log(\r\n        `config.${prop} set to value of element '${node.id}' which is '${config[prop]}'`\r\n      );\r\n      */\r\n    }\r\n  }\r\n  return config;\r\n}\r\n\r\n// Fills values from input to config object and stores config object in session storage.\r\n// This should be done when the user starts an operation which uses the config.\r\nfunction storeInputValues(config) {\r\n  config = readInputElements(config);\r\n  window.sessionStorage.setItem(\"config\", JSON.stringify(config));\r\n}\r\n\r\nfunction reset(defaultConfig) {\r\n  window.sessionStorage.removeItem(\"config\");\r\n  return load(defaultConfig);\r\n}\r\n\r\nexport default {\r\n  load,\r\n  readFromUrl,\r\n  writeInputElements,\r\n  readInputElements,\r\n  storeInputValues,\r\n  reset,\r\n};\r\n","import JWT from \"../util/jwt\";\nimport JSONFormatter from \"json-formatter-js\";\n\nconst formatterConfig = {\n  animateOpen: true,\n  animateClose: true\n};\n\nfunction renderResponse(response) {\n  document.getElementById(\"storedTokens\").hidden = false;\n  document\n    .getElementById(\"idpResponseContainer\")\n    .replaceChildren(new JSONFormatter(response, 2, formatterConfig).render());\n  document\n    .getElementById(\"idpIdTokenContainer\")\n    .replaceChildren(\n      new JSONFormatter(\n        JWT.decode(response.id_token),\n        2,\n        formatterConfig\n      ).render()\n    );\n  document\n    .getElementById(\"idpAccessTokenContainer\")\n    .replaceChildren(\n      new JSONFormatter(\n        JWT.decode(response.access_token),\n        2,\n        formatterConfig\n      ).render()\n    );\n}\n\nfunction renderHideResponse() {\n  document.getElementById(\"storedTokens\").hidden = true;\n}\n\n// Get tokens of brokered IdP if ID token contains claim \"idp_alias\"\n// The user and the client need to have client role broker.read-token, otherwise the request will fail\nasync function fetchIdpIdToken(bearerToken, idTokenEncoded) {\n  // Check if URL for fetching ID token of target IdP is available as claim in ID token\n  if (idTokenEncoded == null) {\n    console.log(\n      \"Original tokens could not be be fetched: No ID token available\"\n    );\n    renderHideResponse();\n    return;\n  }\n  const idToken = JWT.decode(idTokenEncoded);\n  if (idToken.claims.idp_alias == null) {\n    console.log(\n      \"Original tokens could not be be fetched: Claim 'idp_alias' not present in ID token\"\n    );\n    renderHideResponse();\n    return;\n  }\n\n  // Build URL to fetch tokens:\n  // - Keycloak URL has pattern \"https://{host}/auth/realms/{realm}/broker/{alias}/token\"\n  // - Issuer is \"https://{host}/auth/realms/{realm}\"\n  const iss = idToken.claims.iss;\n  const idp_alias = idToken.claims.idp_alias;\n  const url = `${iss}/broker/${idp_alias}/token`;\n\n  // Fetch tokens\n  fetch(url, {\n    headers: {\n      Accept: \"application/json\",\n      Authorization: \"Bearer \" + bearerToken\n    }\n  }).then((response) => response.json())\n    .then((data) => {\n      console.log(\"Original tokens could be fetched.\");\n      renderResponse(data);\n    })\n    .catch((error) => {\n      console.log(\"Could not fetch token. Cross-Origin Request Blocked? Please check if the user has role 'broker.read-token' and the access token has the role listed at claim resource_access.\");\n      console.error(\"Error:\", error);\n    });\n}\n\nexport default {\n  fetchIdpIdToken: fetchIdpIdToken\n};\n","const ID_TOKEN_KEY = \"idToken\";\n\nfunction store(idTokenEncoded) {\n  window.sessionStorage.setItem(ID_TOKEN_KEY, idTokenEncoded);\n}\n\nfunction get() {\n  return window.sessionStorage.getItem(ID_TOKEN_KEY);\n}\n\nfunction discard() {\n  window.sessionStorage.removeItem(ID_TOKEN_KEY);\n}\n\nexport default {\n  store: store,\n  get: get,\n  discard: discard\n};\n","var logoutButtonElement;\n\nfunction init(logoutEndpoint, idTokenProviderFn, onLogout) {\n  logoutButtonElement = document.getElementById(\"logoutButton\");\n  logoutButtonElement.onclick = function () {\n    if (!logoutEndpoint || logoutEndpoint.length === 0) {\n      alert(\"No logout endpoint configured.\");\n      return;\n    }\n    const postLogoutRedirectUri = window.location.origin + \"/\";\n\n    let endSessionUrl = _buildEndSessionUrl(\n      logoutEndpoint,\n      idTokenProviderFn(),\n      postLogoutRedirectUri\n    );\n    onLogout();\n    // Navigate to Logout endpoint of IdP\n    window.location = endSessionUrl;\n  };\n}\n\n// To be called on successful login to show the logout button\nfunction onLogin() {\n  logoutButtonElement.hidden = false;\n}\n\nfunction _buildEndSessionUrl(\n  logoutEndpoint,\n  idTokenEncoded,\n  postLogoutRedirectUri\n) {\n  return `${logoutEndpoint}?id_token_hint=${idTokenEncoded}&post_logout_redirect_uri=${postLogoutRedirectUri}`;\n}\n\nexport default {\n  init,\n  onLogin\n};\n","var refreshButtonElement;\n\n// Init method to find the HTML element which triggers the refresh and handle the click.\nfunction init(config, onResponse, onError) {\n  refreshButtonElement = document.getElementById(\"refreshButton\");\n  refreshButtonElement.onclick = function () {\n    _refreshRequest(config, onResponse, onError);\n  };\n}\n\nfunction _showButton() {\n  refreshButtonElement.hidden = false;\n}\n\nfunction tokenReceived(refreshToken) {\n  _showButton();\n  window.sessionStorage.setItem(\"refreshToken\", refreshToken);\n}\n\n// To be called when logout is perfromed. Discards the refrehs token.\nfunction onLogout() {\n  window.sessionStorage.removeItem(\"refreshToken\");\n}\n\nfunction _refreshRequest(config, onResponse, onError) {\n  let refreshToken = window.sessionStorage.getItem(\"refreshToken\");\n  if (!refreshToken) {\n    console.warn(\"No refresh token available\");\n    return;\n  }\n\n  // Build and send refresh token request\n  // https://www.oauth.com/oauth2-servers/making-authenticated-requests/refreshing-an-access-token/\n  var xhr = new XMLHttpRequest();\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      onResponse(xhr.response);\n    } else {\n      onError(xhr.reponse);\n    }\n  };\n  xhr.responseType = \"json\";\n  xhr.open(\"POST\", config.tokenEndpoint, true);\n  xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n  xhr.send(\n    new URLSearchParams({\n      client_id: config.clientId,\n      grant_type: \"refresh_token\",\n      refresh_token: refreshToken,\n    })\n  );\n}\n\nexport default {\n  init,\n  tokenReceived,\n  onLogout,\n};\n","var userinfoButtonElement;\nvar accessToken;\n\n// Init method to find the HTML element which triggers the userinfo request.\nfunction init(config, onResponse, onError) {\n  userinfoButtonElement = document.getElementById(\"userinfoButton\");\n  userinfoButtonElement.onclick = function () {\n    _userinfoRequest(config.userinfoEndpoint, onResponse, onError);\n  };\n}\n\nfunction onLogin(accessTokenJwt) {\n  userinfoButtonElement.hidden = false;\n  accessToken = accessTokenJwt;\n}\n\nfunction _userinfoRequest(userInfoEndpoint, onResponse, onError) {\n  var xhr = new XMLHttpRequest();\n  xhr.onload = function () {\n    if (xhr.status === 200) {\n      onResponse(xhr.response);\n    } else {\n      onError(xhr.reponse);\n    }\n  };\n  xhr.responseType = \"json\";\n  xhr.open(\"GET\", userInfoEndpoint, true);\n  xhr.setRequestHeader(\"Authorization\", \"Bearer \" + accessToken);\n  xhr.send();\n}\n\nexport default {\n  init,\n  onLogin,\n};\n","let discoveryButtonElement;\nlet discoveryEndpointElement;\n\nfunction init(onResponse, onError) {\n  discoveryButtonElement = document.getElementById(\"discoveryButton\");\n  discoveryEndpointElement = document.getElementById(\"discoveryEndpoint\");\n  discoveryButtonElement.onclick = function () {\n    _discoveryRequest(discoveryEndpointElement.value, onResponse, onError);\n  };\n}\n\nfunction load() {\n  discoveryButtonElement = document.getElementById(\"discoveryButton\");\n  discoveryButtonElement.click();\n}\n\nfunction _discoveryRequest(discoveryEndpointUrl, onResponse, onError) {\n  // Fetch discovery document (https://openid.net/specs/openid-connect-discovery-1_0.html)\n  window.fetch(discoveryEndpointUrl)\n    .then(async (response) => {\n      if (response.ok) {\n        onResponse(discoveryEndpointUrl, await response.json()); \n      }\n      else {\n        console.log(\"Error loading discovery document: \" + response.status);\n        onError(discoveryEndpointUrl, response.status);\n      }\n\n    })\n    .catch ((error) => {\n      onError(discoveryEndpointUrl, error);\n    });\n}\n\nexport default {\n  init,\n  load,\n};\n","\n/**\n * This feature introduces an open redirect into the application.\n * \n * Example:\n * ?response_type=code&client_id=occa&redirect_uri=https%3A%2F%2Fm4hl15.csb.app%2Fforward%3Furl%3Dhttps%3A%2F%2Fexample.com\n*/\n\n// Tries to find an URL parameter in the current location and forwards to this URL.\n// All URL parameters and the hash are passed to the given URL.\nfunction forward(window) {\n    var args = new URLSearchParams(window.location.search);\n    var urlParam = args.get(\"url\");\n    if(!urlParam) {\n      console.log('Forward route expects parameter \"url\"')\n    }\n    else {\n      const forwardUrl = new URL(urlParam);\n      forwardUrl.search = window.location.search;\n      forwardUrl.hash = window.location.hash;\n      // Display a confirmation (aceeptable trade-off if you need an open redirect in your application)\n      if (window.confirm(`Open redirect notice \\n\\nThis page is sending you to an other page and forwards all URL paramaters and the hash:\\n\\n${forwardUrl.hostname}\\n\\nBy clicking OK you risk that your tokens are hijacked. \\nClick Cancel to stay safe.`)) {\n        window.location = forwardUrl.href;\n      }\n    }\n\n}\n\nexport default {\n    forward\n  };\n  "],"names":["$7afa7c6a5c436a64$var$discoveryButtonElement","$7afa7c6a5c436a64$var$discoveryEndpointElement","$parcel$interopDefault","a","__esModule","default","$fc457dc040315093$var$method","crypto","subtle","$fc457dc040315093$var$generateCodeChallenge","codeVerifier","btoa","String","fromCharCode","Uint8Array","digest","TextEncoder","encode","replace","console","warn","onResponse","onError","config","logoutEndpoint","idTokenProviderFn","onLogout","$aca172697686d5c7$var$logoutButtonElement","$f50b8c9883cb4c2c$var$refreshButtonElement","$0e807c677b624126$var$userinfoButtonElement","$0e807c677b624126$var$accessToken","length","text","possible","i","charAt","Math","floor","random","$1d7a13d85044de1b$var$base64UrlDecode","input","decodeURIComponent","atob","split","map","c","charCodeAt","toString","slice","join","jwt","parts","header","JSON","parse","claims","$d6b3afe7d584901c$exports","e","t","r","exec","n","o","Array","isArray","s","document","createElement","classList","add","Node","appendChild","createTextNode","window","setAttribute","innerHTML","head","f","m","l","requestAnimationFrame","d","hoverPreviewEnabled","hoverPreviewArrayCount","hoverPreviewFieldCount","animateOpen","animateClose","theme","useToJSON","sortPropertiesBy","json","open","key","_isOpen","Object","defineProperty","prototype","get","set","enumerable","configurable","Date","type","test","indexOf","keys","isEmptyObject","toJSON","isObject","sort","toggleOpen","isOpen","element","appendChildren","removeChildren","toggle","openAtDepth","remove","getInlinepreview","render","hasKey","constructorName","isUrl","isDate","isEmpty","addEventListener","bind","querySelector","forEach","children","removeChild","$643a24bb97fe0e85$var$formatterConfig","$643a24bb97fe0e85$var$renderNotification","notification","getElementById","prepend","response","replaceChildren","id_token","access_token","title","$13a32a5f5f1c9c3c$var$load","defaultConfig","sessionConfig","sessionStorage","getItem","error","log","removeItem","$13a32a5f5f1c9c3c$var$writeInputElements","prop","node","value","$13a32a5f5f1c9c3c$var$readInputElements","setItem","stringify","$2463cc6bd770c448$var$formatterConfig","$2463cc6bd770c448$var$renderHideResponse","hidden","bearerToken","idTokenEncoded","idToken","idp_alias","iss","fetch","headers","Accept","Authorization","then","data","catch","$208ea963584ef811$var$ID_TOKEN_KEY","refreshToken","accessTokenJwt","$2b6e161c9edcf319$var$defaultConfig","clientId","discoveryEndpoint","authorizationEndpoint","tokenEndpoint","userinfoEndpoint","scope","authParams","$2b6e161c9edcf319$var$redirectUri","location","host","onclick","$2b6e161c9edcf319$var$config","Promise","resolve","codeChallenge","args","URLSearchParams","response_type","client_id","code_challenge_method","code_challenge","redirect_uri","newLocation","trim","urlSearchParamEntries","mergedConfig","search","entries","$2b6e161c9edcf319$var$handleTokenResponse","refresh_token","$2b6e161c9edcf319$var$handleTokenError","error_description","$2b6e161c9edcf319$var$xhr","status","statusText","discoveryEndpointUrl","discoveryJSON","authorization_endpoint","token_endpoint","userinfo_endpoint","end_session_endpoint","errorMessage","ok","click","$f50b8c9883cb4c2c$var$_refreshRequest","xhr","XMLHttpRequest","onload","reponse","responseType","setRequestHeader","send","grant_type","postLogoutRedirectUri","alert","origin","endSessionUrl","userInfoEndpoint","pathname","forward","urlParam","forwardUrl","URL","hash","confirm","hostname","href","$2b6e161c9edcf319$var$args","$2b6e161c9edcf319$var$code","history","pushState","code_verifier","code","errorDescription"],"version":3,"file":"OCCA.fe21df6e.js.map"}